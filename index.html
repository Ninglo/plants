<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>野径手记</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap">
  <link rel="stylesheet" href="css/style.css?v=26">
</head>
<body>
  <!-- 顶部栏 -->
  <header class="top-bar">
    <h1 class="app-title">野径手记</h1>
    <button class="btn-icon" id="btn-sync" title="数据同步">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 1l4 4-4 4"/><path d="M3 11V9a4 4 0 014-4h14"/>
        <path d="M7 23l-4-4 4-4"/><path d="M21 13v2a4 4 0 01-4 4H3"/>
      </svg>
    </button>
  </header>

  <!-- 主内容区 -->
  <main class="main-content" id="main-content">
    <!-- 各视图会通过JS动态渲染到这里 -->
  </main>

  <!-- 快速拍照浮动按钮 -->
  <button class="fab" id="btn-quick-photo" title="快速拍照记录">
    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M23 19a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h4l2-3h6l2 3h4a2 2 0 012 2z"/>
      <circle cx="12" cy="13" r="4"/>
    </svg>
  </button>

  <!-- 底部导航栏 -->
  <nav class="bottom-nav">
    <button class="nav-item active" data-view="home">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
        <polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
      <span>首页</span>
    </button>
    <button class="nav-item" data-view="timeline">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/>
        <line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/>
      </svg>
      <span>时间线</span>
    </button>
    <button class="nav-item" data-view="plants">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 22c-4-3-8-6-8-11a8 8 0 0116 0c0 5-4 8-8 11z"/>
        <circle cx="12" cy="11" r="3"/>
      </svg>
      <span>植物</span>
    </button>
    <button class="nav-item" data-view="knowledge">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/>
      </svg>
      <span>知识库</span>
    </button>
    <button class="nav-item" data-view="graph">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><circle cx="18" cy="18" r="3"/>
        <line x1="6" y1="9" x2="6" y2="15"/><path d="M6 6l12 12"/>
      </svg>
      <span>图谱</span>
    </button>
  </nav>

  <!-- 模态框容器 -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="modal-title"></h2>
        <button class="btn-icon modal-close" id="modal-close">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <div class="modal-body" id="modal-body"></div>
    </div>
  </div>

  <!-- JS 文件按依赖顺序加载 -->
  <script src="js/photodb.js?v=26"></script>
  <script src="js/storage.js?v=26"></script>
  <script src="js/sync.js?v=26"></script>
  <script src="js/recommend.js?v=26"></script>
  <script src="js/form.js?v=26"></script>
  <script src="js/inbox.js?v=26"></script>
  <script src="js/timeline.js?v=26"></script>
  <script src="js/cards.js?v=26"></script>
  <script src="js/knowledge.js?v=26"></script>
  <script src="js/graph.js?v=26"></script>
  <script src="js/chat.js?v=26"></script>
  <script src="js/app.js?v=26"></script>
</body>
</html>
